let lang = localStorage.getItem('lang') || 'vi';

export function setLang(l) {
  lang = l;
  localStorage.setItem('lang', l);
}

export function t(key) {
  const dict = {
    vi: {
      allJobs: 'Tất cả nghề nghiệp', allAZ: 'Tất cả', total: 'Tổng số profile', totalViews: 'Tổng lượt xem', jobDistribution: 'Phân bố nghề nghiệp', profileViewsChart: 'Biểu đồ Lượt xem Profile', add: 'Thêm', edit: 'Sửa', save: 'Lưu', cancel: 'Hủy', protectCode: 'Mã bảo vệ', enterCode: 'Nhập mã bảo vệ', wrongCode: 'Sai mã bảo vệ!', success: 'Thành công!', error: 'Lỗi!', copy: 'Copy link', share: 'Chia sẻ', view: 'Xem', noProfile: 'Chưa có profile nào.', job: 'Công việc', name: 'Họ tên', bio: 'Giới thiệu', avatar: 'Link ảnh đại diện', profileList: 'Danh sách Profiles', home: 'Trang chủ', dark: 'Dark Mode', editProfile: 'Chỉnh sửa Profile', profileDetail: 'Chi tiết Profile', back: 'Quay lại danh sách', confirmDeleteProfile: 'Xác nhận xóa Profile', confirmDeleteMessage: 'Bạn có chắc chắn muốn xóa profile này không?', actionIrreversible: 'Hành động này không thể hoàn tác.', deletePermanently: 'Xóa vĩnh viễn', close: 'Đóng', qrCode: 'Mã QR', comments: 'Bình luận', enterComment: 'Nhập bình luận...', send: 'Gửi', downloadImage: 'Tải về ảnh', togglePrivateInfo: 'Ẩn/Hiện thông tin', faqTitle: 'Hướng dẫn & FAQ', downloadImageTitle: 'Tải về ảnh', downloadImageDesc: 'Nhấn nút \"Tải về ảnh\" để lưu profile thành ảnh PNG.', togglePrivateInfoTitle: 'Ẩn/Hiện thông tin', togglePrivateInfoDesc: 'Nhấn để ẩn/hiện các trường cá nhân như email, Facebook, LinkedIn.', viewsTitle: 'Lượt xem', viewsDesc: 'Mỗi lần truy cập sẽ tăng 1 lượt xem (chỉ tính trên thiết bị của bạn).', favoritesTitle: 'Yêu thích', favoritesDesc: 'Nhấn tim để thêm vào danh sách yêu thích (Favorites).', commentsTitle: 'Bình luận', commentsDesc: 'Bạn có thể bình luận, các bình luận chỉ lưu trên trình duyệt của bạn.', anonymous: 'Ẩn danh', editCommentPrompt: 'Chỉnh sửa bình luận:', commentEditSuccess: 'Bình luận đã được cập nhật.', commentNotFound: 'Không tìm thấy bình luận.', confirmDeleteComment: 'Bạn có chắc muốn xóa bình luận này không?', commentDeleteSuccess: 'Bình luận đã được xóa.', shareTitle: 'Chia sẻ', shareDesc: 'Sử dụng các nút chia sẻ Facebook, LinkedIn, Telegram, Zalo, Email, QR code.', shareWebsite: 'Chia sẻ trang web', shareWebsiteMessage: 'Chia sẻ trang web này với bạn bè và đồng nghiệp!', loading: 'Đang tải...', settings: 'Cài đặt', defaultTheme: 'Chủ đề mặc định', defaultLanguage: 'Ngôn ngữ mặc định', dataManagement: 'Quản lý dữ liệu', clearAllData: 'Xóa toàn bộ dữ liệu cục bộ', clearAllDataWarning: 'Thao tác này sẽ xóa tất cả dữ liệu profiles, lượt xem, yêu thích và bình luận lưu trên trình duyệt của bạn. Dữ liệu trên JSONBin.io sẽ không bị ảnh hưởng.', themeSaved: 'Chủ đề đã được lưu.', languageSaved: 'Ngôn ngữ đã được lưu.', confirmClearData: 'Bạn có chắc chắn muốn xóa tất cả dữ liệu cục bộ không?', dataCleared: 'Đã xóa tất cả dữ liệu cục bộ.', faq: 'FAQ', contact: 'Liên hệ', contactFormTitle: 'Liên hệ qua form:', yourName: 'Tên của bạn', yourEmail: 'Email của bạn', message: 'Tin nhắn', sendMessage: 'Gửi tin nhắn', confirm: 'Xác nhận', delete: 'Xóa', websiteName: 'Profiles Website', allRightsReserved: 'Tất cả quyền được bảo lưu.', homePageTitle: 'Trang chủ | Profiles Website', homePageDescription: 'Website tạo và chia sẻ profile cá nhân, chạy trên GitHub Pages.', welcome: 'Chào mừng đến với', homeIntro: 'Nơi mọi người có thể tạo và chia sẻ profile cá nhân của mình.', viewProfiles: 'Xem danh sách Profiles', profileListDescription: 'Danh sách profiles cá nhân, tạo và chia sẻ miễn phí.', qr: 'QR', qrCodeListDesc: 'Mã QR trang danh sách', searchPlaceholder: 'Tìm kiếm theo tên hoặc công việc...', hasAvatar: 'Có avatar', hasSocial: 'Có mạng xã hội', hasEmail: 'Có email', grid: 'Lưới', list: 'Danh sách', exportJson: 'Xuất JSON', importJson: 'Nhập JSON', qrCodeListTitle: 'QR Code Danh Sách', filterFavsTitle: 'Lọc yêu thích', filterFavsDesc: 'Nhấn nút tim để chỉ xem các profile đã yêu thích.', viewModeTitle: 'Chế độ xem', viewModeDesc: 'Chuyển đổi giữa lưới và danh sách.', statsTitle: 'Thống kê', statsDesc: 'Xem tổng số profile, lượt xem, favorites.', shareMethodsTitle: 'Chia sẻ', shareMethodsDesc: 'Sử dụng các nút chia sẻ, QR code.', addProfileTitle: 'Thêm profile', addProfileDesc: 'Điền thông tin và nhấn Thêm.', },
    en: {
      allJobs: 'All jobs', allAZ: 'All', total: 'Total profiles', totalViews: 'Total Views', jobDistribution: 'Job Distribution', profileViewsChart: 'Profile Views Chart', add: 'Add', edit: 'Edit', save: 'Save', cancel: 'Cancel', protectCode: 'Protect code', enterCode: 'Enter protect code', wrongCode: 'Wrong code!', success: 'Success!', error: 'Error!', copy: 'Copy link', share: 'Share', view: 'View', noProfile: 'No profiles yet.', job: 'Job', name: 'Name', bio: 'Bio', avatar: 'Avatar link', profileList: 'Profiles List', home: 'Home', dark: 'Dark Mode', editProfile: 'Edit Profile', profileDetail: 'Profile Detail', back: 'Back to list', confirmDeleteProfile: 'Confirm Delete Profile', confirmDeleteMessage: 'Are you sure you want to delete this profile?', actionIrreversible: 'This action cannot be undone.', deletePermanently: 'Delete Permanently', close: 'Close', qrCode: 'QR Code', comments: 'Comments', enterComment: 'Enter comment...', send: 'Send', downloadImage: 'Download Image', togglePrivateInfo: 'Hide/Show Info', faqTitle: 'Guide & FAQ', downloadImageTitle: 'Download Image', downloadImageDesc: 'Click \"Download Image\" to save profile as PNG.', togglePrivateInfoTitle: 'Hide/Show Info', togglePrivateInfoDesc: 'Click to hide/show personal fields like email, Facebook, LinkedIn.', viewsTitle: 'Views', viewsDesc: 'Each visit increases view count (local device only).', favoritesTitle: 'Favorites', favoritesDesc: 'Click heart to add to Favorites list.', commentsTitle: 'Comments', commentsDesc: 'You can comment, comments are saved only on your browser.', anonymous: 'Anonymous', editCommentPrompt: 'Edit comment:', commentEditSuccess: 'Comment updated successfully.', commentNotFound: 'Comment not found.', confirmDeleteComment: 'Are you sure you want to delete this comment?', commentDeleteSuccess: 'Comment deleted successfully.', shareTitle: 'Share', shareDesc: 'Use share buttons for Facebook, LinkedIn, Telegram, Zalo, Email, QR code.', shareWebsite: 'Share Website', shareWebsiteMessage: 'Share this website with friends and colleagues!', loading: 'Loading...', settings: 'Settings', defaultTheme: 'Default Theme', defaultLanguage: 'Default Language', dataManagement: 'Data Management', clearAllData: 'Clear All Local Data', clearAllDataWarning: 'This action will clear all profile data, views, favorites, and comments saved on your browser. Data on JSONBin.io will not be affected.', themeSaved: 'Theme saved successfully.', languageSaved: 'Language saved successfully.', confirmClearData: 'Are you sure you want to clear all local data?', dataCleared: 'All local data cleared.', faq: 'FAQ', contact: 'Contact', contactFormTitle: 'Contact via form:', yourName: 'Your Name', yourEmail: 'Your Email', message: 'Message', sendMessage: 'Send Message', confirm: 'Confirm', delete: 'Delete', websiteName: 'Profiles Website', allRightsReserved: 'All rights reserved.', homePageTitle: 'Home | Profiles Website', homePageDescription: 'Website for creating and sharing personal profiles, running on GitHub Pages.', welcome: 'Welcome to', homeIntro: 'Where people can create and share their personal profiles.', viewProfiles: 'View Profiles List', profileListDescription: 'List of personal profiles, create and share for free.', qr: 'QR', qrCodeListDesc: 'QR code for profiles list page', searchPlaceholder: 'Search by name or job...', hasAvatar: 'Has avatar', hasSocial: 'Has social media', hasEmail: 'Has email', grid: 'Grid', list: 'List', exportJson: 'Export JSON', importJson: 'Import JSON', qrCodeListTitle: 'QR Code List', filterFavsTitle: 'Filter Favorites', filterFavsDesc: 'Click heart button to only see favorited profiles.', viewModeTitle: 'View Mode', viewModeDesc: 'Toggle between grid and list view.', statsTitle: 'Statistics', statsDesc: 'View total profiles, views, favorites.', shareMethodsTitle: 'Share Methods', shareMethodsDesc: 'Use share buttons, QR code.', addProfileTitle: 'Add profile', addProfileDesc: 'Fill in information and click Add.', }
  };
  return dict[lang][key] || key;
}

if (!localStorage.getItem('lang')) {
  const browserLang = navigator.language || navigator.userLanguage;
  if (browserLang && browserLang.startsWith('en')) setLang('en');
  else setLang('vi');
} 